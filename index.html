<html><head><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><title>Cornichon</title><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="description" content="An extensible Scala DSL for testing JSON HTTP APIs." /><meta name="author" content="Arnaud Gourlay" /><meta name="og:image" content="/cornichon/img/poster.png" /><meta name="og:title" content="Cornichon" /><meta name="og:site_name" content="Cornichon" /><meta name="og:url" content="http://agourlay.github.io/cornichon/" /><meta name="og:type" content="website" /><meta name="og:description" content="An extensible Scala DSL for testing JSON HTTP APIs." /><meta name="twitter:image" content="/cornichon/img/poster.png" /><meta name="twitter:card" content="summary_large_image" /><meta name="twitter:site" content="" /><meta name="kazari-dependencies" content="" /><meta name="kazari-resolvers" content="" /><link rel="icon" type="image/png" href="/cornichon/img/favicon.png" /><link rel="icon" type="image/png" sizes="16x16" href="/cornichon/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/cornichon/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/cornichon/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/cornichon/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/cornichon/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/cornichon/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/cornichon/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/cornichon/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/cornichon/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/cornichon/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/cornichon/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/cornichon/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/cornichon/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/cornichon/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/cornichon/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/cornichon/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/cornichon/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/cornichon/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/cornichon/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/cornichon/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/cornichon/highlight/styles/atom-one-light.css" /><link rel="stylesheet" href="/cornichon/css/style.css" /><link rel="stylesheet" href="/cornichon/css/palette.css" /><link rel="stylesheet" href="/cornichon/css/codemirror.css" /><link rel="stylesheet" href="/cornichon/css/kazari-style.css" /><link rel="stylesheet" href="/cornichon/css/solarized-dark.css" /><link rel="stylesheet" href="/cornichon/css/override.css" /></head><body><header id="site-header"><div class="navbar-wrapper"><div class="container"><div class="row"><div class="col-xs-6"><a href="/cornichon/" class="brand"><div class="icon-wrapper"><span>Cornichon</span></div></a></div><div class="col-xs-6"><nav class="text-right"><ul class=""><li><a href="https://github.com/agourlay/cornichon"><i class="fa fa-github"></i><span class="hidden-xs">GitHub</span></a></li><li><a href="api"><i class="fa fa-file-text"></i><span class="hidden-xs">Documentation</span></a></li></ul></nav></div></div></div></div><div class="jumbotron"><div class="container"><h1 class="text-center">An extensible Scala DSL for testing JSON HTTP APIs.</h1><h2></h2><p class="text-center"><a href="https://github.com/agourlay/cornichon" class="btn btn-outline-inverse">View on GitHub</a></p></div></div><div><ul class="horizontalNav">       <li><a class="" href="/cornichon/dsl.html">DSL</a></li>  <li><a class="" href="/cornichon/placeholders-matchers.html">Placeholders & matchers</a></li>  <li><a class="" href="/cornichon/custom-steps.html">Custom steps</a></li>  <li><a class="" href="/cornichon/feature-options.html">Feature options</a></li>  <li><a class="" href="/cornichon/misc.html">Misc.</a></li> </ul></div></header><main id="site-main"><section class="use"><div class="container"><div id="content"><p><a href="https://travis-ci.org/agourlay/cornichon"><img src="https://travis-ci.org/agourlay/cornichon.svg?branch=master" alt="Build Status" /></a>
<a href="https://maven-badges.herokuapp.com/maven-central/com.github.agourlay/cornichon_2.11"><img src="https://maven-badges.herokuapp.com/maven-central/com.github.agourlay/cornichon_2.11/badge.svg" alt="Maven Central" /></a>
<a href="https://gitter.im/agourlay/cornichon?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://badges.gitter.im/Join%20Chat.svg" alt="Join the chat at https://gitter.im/agourlay/cornichon" /></a>
<a href="http://www.apache.org/licenses/LICENSE-2.0.txt"><img src="http://img.shields.io/:license-Apache%202-brightgreen.svg" alt="License" /></a></p>

<p><a name="quick-start"></a></p>

<h2 id="quick-start">Quick start</h2>

<p>cornichon is cross-built for Scala 2.11, and 2.12 so you can just add the following to your build:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">"com.github.agourlay"</span> <span class="o">%%</span> <span class="s">"cornichon"</span> <span class="o">%</span> <span class="s">"0.11.2"</span> <span class="o">%</span> <span class="nc">Test</span>
</code></pre>
</div>

<p>Cornichon is currently integrated with <a href="http://www.scalatest.org/">ScalaTest</a>, place your <code class="highlighter-rouge">Feature</code> files inside <code class="highlighter-rouge">src/test/scala</code> and run them using <code class="highlighter-rouge">sbt test</code>.</p>

<p>A <code class="highlighter-rouge">Feature</code> is a class extending <code class="highlighter-rouge">CornichonFeature</code> and implementing the required <code class="highlighter-rouge">feature</code> function.</p>

<p>How does it look like?</p>

<p>Find below an example of testing the Open Movie Database API.</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">import</span> <span class="nn">com.github.agourlay.cornichon.CornichonFeature</span>

<span class="k">class</span> <span class="nc">ReadmeExample</span> <span class="k">extends</span> <span class="nc">CornichonFeature</span> <span class="o">{</span>

  <span class="k">def</span> <span class="n">feature</span> <span class="k">=</span> <span class="nc">Feature</span><span class="o">(</span><span class="s">"OpenMovieDatabase API"</span><span class="o">){</span>

    <span class="nc">Scenario</span><span class="o">(</span><span class="s">"list GOT season 1 episodes"</span><span class="o">){</span>

      <span class="nc">When</span> <span class="n">I</span> <span class="n">get</span><span class="o">(</span><span class="s">"http://www.omdbapi.com"</span><span class="o">).</span><span class="n">withParams</span><span class="o">(</span>
        <span class="s">"t"</span> <span class="o">-&gt;</span> <span class="s">"Game of Thrones"</span><span class="o">,</span>
        <span class="s">"Season"</span> <span class="o">-&gt;</span> <span class="s">"1"</span>
      <span class="o">)</span>

      <span class="nc">Then</span> <span class="n">assert</span> <span class="n">status</span><span class="o">.</span><span class="n">is</span><span class="o">(</span><span class="mi">200</span><span class="o">)</span>

      <span class="nc">And</span> <span class="n">assert</span> <span class="n">body</span><span class="o">.</span><span class="n">ignoring</span><span class="o">(</span><span class="s">"Episodes"</span><span class="o">,</span> <span class="s">"Response"</span><span class="o">).</span><span class="n">is</span><span class="o">(</span>
        <span class="s">"""
        {
          "Title": "Game of Thrones",
          "Season": "1"
        }
        """</span><span class="o">)</span>

      <span class="nc">And</span> <span class="n">assert</span> <span class="n">body</span><span class="o">.</span><span class="n">path</span><span class="o">(</span><span class="s">"Episodes"</span><span class="o">).</span><span class="n">is</span><span class="o">(</span>
        <span class="s">"""
        |                Title                    |   Released   | Episode | imdbRating |   imdbID    |
        | "Winter Is Coming"                      | "2011-04-17" |   "1"   |    "8.1"   | "tt1480055" |
        | "The Kingsroad"                         | "2011-04-24" |   "2"   |    "7.8"   | "tt1668746" |
        | "Lord Snow"                             | "2011-05-01" |   "3"   |    "7.6"   | "tt1829962" |
        | "Cripples, Bastards, and Broken Things" | "2011-05-08" |   "4"   |    "7.7"   | "tt1829963" |
        | "The Wolf and the Lion"                 | "2011-05-15" |   "5"   |    "8.0"   | "tt1829964" |
        | "A Golden Crown"                        | "2011-05-22" |   "6"   |    "8.1"   | "tt1837862" |
        | "You Win or You Die"                    | "2011-05-29" |   "7"   |    "8.1"   | "tt1837863" |
        | "The Pointy End"                        | "2011-06-05" |   "8"   |    "7.9"   | "tt1837864" |
        | "Baelor"                                | "2011-06-12" |   "9"   |    "8.6"   | "tt1851398" |
        | "Fire and Blood"                        | "2011-06-19" |  "10"   |    "8.4"   | "tt1851397" |
        """</span><span class="o">)</span>

      <span class="nc">And</span> <span class="n">assert</span> <span class="n">body</span><span class="o">.</span><span class="n">path</span><span class="o">(</span><span class="s">"Episodes"</span><span class="o">).</span><span class="n">asArray</span><span class="o">.</span><span class="n">hasSize</span><span class="o">(</span><span class="mi">10</span><span class="o">)</span>

      <span class="nc">And</span> <span class="n">assert</span> <span class="n">body</span><span class="o">.</span><span class="n">path</span><span class="o">(</span><span class="s">"Episodes[0]"</span><span class="o">).</span><span class="n">is</span><span class="o">(</span>
        <span class="s">"""
        {
          "Title": "Winter Is Coming",
          "Released": "2011-04-17",
          "Episode": "1",
          "imdbRating": "8.1",
          "imdbID": "tt1480055"
        }
        """</span><span class="o">)</span>

      <span class="nc">And</span> <span class="n">assert</span> <span class="n">body</span><span class="o">.</span><span class="n">path</span><span class="o">(</span><span class="s">"Episodes[0].Released"</span><span class="o">).</span><span class="n">is</span><span class="o">(</span><span class="s">"2011-04-17"</span><span class="o">)</span>

      <span class="nc">And</span> <span class="n">assert</span> <span class="n">body</span><span class="o">.</span><span class="n">path</span><span class="o">(</span><span class="s">"Episodes"</span><span class="o">).</span><span class="n">asArray</span><span class="o">.</span><span class="n">contains</span><span class="o">(</span>
        <span class="s">"""
        {
          "Title": "Winter Is Coming",
          "Released": "2011-04-17",
          "Episode": "1",
          "imdbRating": "8.1",
          "imdbID": "tt1480055"
        }
        """</span><span class="o">)</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>For more examples see the following files which are part of the test pipeline:</p>

<ul>
  <li>
    <p><a href="https://github.com/agourlay/cornichon/blob/master/cornichon-scalatest/src/test/scala/com/github/agourlay/cornichon/examples/superHeroes/SuperHeroesScenario.scala">Embedded Superheroes API</a>.</p>
  </li>
  <li>
    <p><a href="https://github.com/agourlay/cornichon/blob/master/cornichon-scalatest/src/it/scala/com.github.agourlay.cornichon.examples/OpenMovieDatabase.scala">OpenMovieDatabase API</a>.</p>
  </li>
  <li>
    <p><a href="https://github.com/agourlay/cornichon/blob/master/cornichon-scalatest/src/it/scala/com.github.agourlay.cornichon.examples/DeckOfCard.scala">DeckOfCard API</a>.</p>
  </li>
  <li>
    <p><a href="https://github.com/agourlay/cornichon/blob/master/cornichon-scalatest/src/it/scala/com.github.agourlay.cornichon.examples/StarWars.scala">Star Wars API</a>.</p>
  </li>
  <li>
    <p><a href="https://github.com/agourlay/cornichon/blob/master/cornichon-scalatest/src/test/scala/com/github/agourlay/cornichon/examples/math/MathScenario.scala">Math Operations</a>.</p>
  </li>
</ul>

<p>And if you enjoy slides, you might like <a href="https://speakerdeck.com/agourlay/cornichon-a-scala-dsl-for-testing-http-json-api">this presentation</a> given at the <a href="https://www.meetup.com/Scala-Berlin-Brandenburg/events/235779912/">Berlin Scala User Group</a> which gives more context regarding the creation and usage of this library.</p>

<h2 id="structure">Structure</h2>

<p>A Cornichon test is the definition of a so-called <code class="highlighter-rouge">feature</code>.</p>

<p>A <code class="highlighter-rouge">feature</code> can have several <code class="highlighter-rouge">scenarios</code> which in turn can have several <code class="highlighter-rouge">steps</code>.</p>

<p>The example below contains one <code class="highlighter-rouge">feature</code> with one <code class="highlighter-rouge">scenario</code> with two <code class="highlighter-rouge">steps</code>.</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">import</span> <span class="nn">com.github.agourlay.cornichon.CornichonFeature</span>

<span class="k">class</span> <span class="nc">CornichonExamplesSpec</span> <span class="k">extends</span> <span class="nc">CornichonFeature</span> <span class="o">{</span>

  <span class="k">def</span> <span class="n">feature</span> <span class="k">=</span> <span class="nc">Feature</span><span class="o">(</span><span class="s">"Checking google"</span><span class="o">){</span>

    <span class="nc">Scenario</span><span class="o">(</span><span class="s">"Google is up and running"</span><span class="o">){</span>

      <span class="nc">When</span> <span class="n">I</span> <span class="n">get</span><span class="o">(</span><span class="s">"http://google.com"</span><span class="o">)</span>

      <span class="nc">Then</span> <span class="n">assert</span> <span class="n">status</span><span class="o">.</span><span class="n">is</span><span class="o">(</span><span class="mi">302</span><span class="o">)</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>The failure modes are the following:</p>

<ul>
  <li>
    <p>A <code class="highlighter-rouge">feature</code> fails if one or more <code class="highlighter-rouge">scenarios</code> fail.</p>
  </li>
  <li>
    <p>A <code class="highlighter-rouge">scenario</code> fails if at least one <code class="highlighter-rouge">step</code> fails.</p>
  </li>
  <li>
    <p>A <code class="highlighter-rouge">scenario</code> will stop at the first failed step encountered and ignore the remaining <code class="highlighter-rouge">steps</code>.</p>
  </li>
</ul>

<h2 id="license">License</h2>

<p><strong>Cornichon</strong> is licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a> (the
“License”); you may not use this software except in compliance with the License.</p>

<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an “AS IS” BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
</div></div></section><section class="technologies"><div class="container"><div class="row"></div></div></section></main><footer id="site-footer"><div class="container"><div class="row"><div class="col-xs-6"><p>Cornichon is designed and developed by <a href="https://github.com/agourlay/cornichon" target="_blank">Arnaud Gourlay</a></p></div><div class="col-xs-6"><p class="text-right"><a href="https://github.com/agourlay/cornichon"><span class="fa fa-github"></span>View on GitHub</a></p></div></div><div class="row"><div class="col-xs-6"><p>Website built with <a href="https://47deg.github.io/sbt-microsites/" target="_blank">Sbt-microsites</a> - © 2016 <a href="https://www.47deg.com/" target="_blank">47 Degrees</a></p></div></div></div></footer><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/cornichon/highlight/highlight.pack.js"></script><script>hljs.configure({
languages:['scala','java','bash']
});
hljs.initHighlighting();
             </script><script src="/cornichon/js/kazari.js"></script><script><script>
$(document).ready(function() {
	kazari.KazariPlugin().decorateCode('https://scala-evaluator-212.herokuapp.com/eval', 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.S2F6YXJp.Jl2eqMfw8IakJF93PjxTbrf-8YUJgX5OoOfy5JHE8Yw', '', 'solarized-dark')
})
    </script></script></body></html>